<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Prism Motion Game</title>
  <style>
    body {
      background-color: #0a0a0a;
      color: white;
      text-align: center;
      font-family: Arial, sans-serif;
      overflow: hidden;
      margin: 0;
    }

    #logo {
      width: 80px;
      margin-top: 20px;
    }

    #canvas {
      border: 1px solid white;
      display: block;
      margin: 20px auto;
      background: radial-gradient(circle, #111, #000);
      max-width: 90%;
      height: auto;
    }

    #restartBtn {
      display: none;
      padding: 10px 20px;
      margin: 20px;
      font-size: 16px;
      background-color: #444;
      color: white;
      border: none;
      border-radius: 8px;
      cursor: pointer;
    }
    #restartBtn:hover {
      background-color: #666;
    }

    #instructions {
      font-size: 14px;
      color: #bbb;
    }
  </style>
</head>

<body>
  <img id="logo" src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAATgAAAE4CAMAAAD4oR9YAAAABGdBTUEAALGPC/xhBQAAAAFzUkdCAK7OHOkAAAAgY0hSTQAAeiYAAICEAAD6AAAAgOgAAHUwAADqYAAAOpgAABdwnLpRPAAAACpQTFRFwP1cVG8pMD8XAAAAGCAMSF8jDBAGGCALMEAXeJ45bI80PFAdeJ46YH8uCZvTVgAAAeRJREFUeJzt3TluAzEQAEFZXkk+5P9/16GCBTZoGOCsUfUCopnxwFwuAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACrvV0HWx3nyPV9sNVxjggXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkX7cNttzFWxzmyDzd6uXMIFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRftw90fY0zew9HPvD5W1zkgXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXLQPd/1cZL+Uc4Vbdl59E64RLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi46e7ht1VDQ+8nDDSJcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcNDnc1+pRoC/bqcINcq47h0GEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLhIuEi4SLzhXue/Uo0BffLv+McJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcJFwkXCRcNHkcM+fwZ6r6wAAAAAAAAAAAAAAAAAAAAAAAAAAAADAf/ILRNW27H9IMzQAAAAASUVORK5CYII=" alt="Logo" />
  
  <h1>Prism Motion</h1>
  <p id="instructions">Use arrow keys to move the prism and avoid the edges.</p>
  <canvas id="canvas"></canvas>
  <button id="restartBtn">Restart</button>

  <script>
    const canvas = document.getElementById("canvas");
    const ctx = canvas.getContext("2d");
    const restartBtn = document.getElementById("restartBtn");

    let animationId;
    let gameState = {
      x: 400,
      y: 300,
      size: 40,
      speed: 4,
      angle: 0,
      playing: true,
      trail: [],
      keys: {},
      colors: ["#ff0080", "#00ffea", "#ffea00", "#ff6600", "#00ff66"],
      patterns: [],
    };

    // Resize canvas dynamically
    function resizeCanvas() {
      canvas.width = window.innerWidth * 0.9;
      canvas.height = window.innerHeight * 0.8;
    }
    window.addEventListener("resize", resizeCanvas);
    resizeCanvas();

    // Input handling
    window.addEventListener("keydown", (e) => (gameState.keys[e.key] = true));
    window.addEventListener("keyup", (e) => (gameState.keys[e.key] = false));

    // Draw prism
    function drawPrism() {
      const { x, y, size, angle } = gameState;
      ctx.save();
      ctx.translate(x, y);
      ctx.rotate(angle);
      const color = gameState.colors[Math.floor(Math.random() * gameState.colors.length)];
      ctx.strokeStyle = color;
      ctx.lineWidth = 3;
      ctx.beginPath();
      for (let i = 0; i < 6; i++) {
        const theta = (i / 6) * 2 * Math.PI;
        const px = size * Math.cos(theta);
        const py = size * Math.sin(theta);
        i === 0 ? ctx.moveTo(px, py) : ctx.lineTo(px, py);
      }
      ctx.closePath();
      ctx.stroke();
      ctx.restore();
    }

    // Move prism
    function update() {
      const { keys, speed } = gameState;
      if (keys["ArrowUp"]) gameState.y -= speed;
      if (keys["ArrowDown"]) gameState.y += speed;
      if (keys["ArrowLeft"]) gameState.x -= speed;
      if (keys["ArrowRight"]) gameState.x += speed;
      gameState.angle += 0.05;

      // Trail
      gameState.trail.push({ x: gameState.x, y: gameState.y, alpha: 1 });
      if (gameState.trail.length > 100) gameState.trail.shift();

      // Edge detection
      if (
        gameState.x - gameState.size < 0 ||
        gameState.x + gameState.size > canvas.width ||
        gameState.y - gameState.size < 0 ||
        gameState.y + gameState.size > canvas.height
      ) {
        gameState.playing = false;
        restartBtn.style.display = "inline-block";
      }
    }

    function drawTrail() {
      gameState.trail.forEach((t) => {
        ctx.fillStyle = `rgba(255,255,255,${t.alpha})`;
        ctx.beginPath();
        ctx.arc(t.x, t.y, 2, 0, Math.PI * 2);
        ctx.fill();
        t.alpha -= 0.02;
      });
      gameState.trail = gameState.trail.filter((t) => t.alpha > 0);
    }

    function drawPatterns() {
      if (Math.random() < 0.02) {
        gameState.patterns.push({
          x: Math.random() * canvas.width,
          y: Math.random() * canvas.height,
          alpha: 1,
          color: gameState.colors[Math.floor(Math.random() * gameState.colors.length)],
        });
      }
      gameState.patterns.forEach((p) => {
        ctx.strokeStyle = `rgba(${parseInt(p.color.slice(1, 3), 16)},${parseInt(
          p.color.slice(3, 5),
          16
        )},${parseInt(p.color.slice(5, 7), 16)},${p.alpha})`;
        ctx.beginPath();
        ctx.arc(p.x, p.y, 20, 0, Math.PI * 2);
        ctx.stroke();
        p.alpha -= 0.01;
      });
      gameState.patterns = gameState.patterns.filter((p) => p.alpha > 0);
    }

    function gameLoop() {
      if (!gameState.playing) return;
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      drawPatterns();
      drawTrail();
      drawPrism();
      update();
      animationId = requestAnimationFrame(gameLoop);
    }

    function startGame() {
      cancelAnimationFrame(animationId);
      restartBtn.style.display = "none";
      gameState = {
        ...gameState,
        x: canvas.width / 2,
        y: canvas.height / 2,
        trail: [],
        patterns: [],
        playing: true,
        keys: {},
      };
      gameLoop();
    }

    restartBtn.addEventListener("click", startGame);
    startGame();
  </script>
</body>
</html>
